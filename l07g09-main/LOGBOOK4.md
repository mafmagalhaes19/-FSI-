## Task 1: Manipulating Environment Variables
    - printenv
    ````LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
````HOSTTYPE=x86_64````
````LESSCLOSE=/usr/bin/lesspipe %s %s````
````LANG=C.UTF-8````
````OLDPWD=/mnt/c/users/mafim/Desktop/FEUP/FSI/seed-labs-master/seed-labs-master/category-software/Environment_Variable_and_SetUID````
````WSL_DISTRO_NAME=Ubuntu````
````JAVA_HOME=/usr/lib/jvm/java-15-oracle````
````J2SDKDIR=/usr/lib/jvm/java-15-oracle````
````DERBY_HOME=/usr/lib/jvm/java-15-oracle/db````
````USER=mafmag````
````PWD=/mnt/c/users/mafim/Desktop/FEUP/FSI/seed-labs-master/seed-labs-master/category-software/Environment_Variable_and_SetUID/Labsetup````
````HOME=/home/mafmag````
````J2REDIR=/usr/lib/jvm/java-15-oracle````
````NAME=DESKTOP-PGKE5J9````
````XDG_DATA_DIRS=/usr/local/share:/usr/share:/var/lib/snapd/desktop````
````SHELL=/bin/bash````
````TERM=xterm-256color````
````SHLVL=1````
````LOGNAME=mafmag````
````PATH=/home/mafmag/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/mnt/c/Program Files/WindowsApps/CanonicalGroupLimited.UbuntuonWindows_2004.2021.825.0_x64__79rhkp1fndgsc:/mnt/c/Program Files/AdoptOpenJDK/jdk-11.0.10.9-hotspot/bin:/mnt/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/iCLS/:/mnt/c/Program Files/Intel/Intel(R) Management Engine Components/iCLS/:/mnt/c/Windows/system32:/mnt/c/Windows:/mnt/c/Windows/System32/Wbem:/mnt/c/Windows/System32/WindowsPowerShell/v1.0/:/mnt/c/Windows/System32/OpenSSH/:/mnt/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/DAL:/mnt/c/Program Files/Intel/Intel(R) Management Engine Components/DAL:/mnt/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/IPT:/mnt/c/Program Files/Intel/Intel(R) Management Engine Components/IPT:/mnt/c/Program Files (x86)/NVIDIA Corporation/PhysX/Common:/mnt/c/WINDOWS/system32:/mnt/c/WINDOWS:/mnt/c/WINDOWS/System32/Wbem:/mnt/c/WINDOWS/System32/WindowsPowerShell/v1.0/:/mnt/c/WINDOWS/System32/OpenSSH/:/mnt/c/TDM-GCC-64/bin:/mnt/c/Program Files/MIT/Kerberos/bin:/mnt/c/Program Files (x86)/OpenAFS/Common:/mnt/c/Program Files (x86)/OpenAFS/Client/Program:/mnt/c/Program Files/OpenAFS/Common:/mnt/c/Program Files/OpenAFS/Client/Program:/mnt/c/Program Files/Java/jdk-13.0.1:/mnt/c/Program Files (x86)/Common Files/Oracle/Java/javapath:/mnt/c/ProgramData/chocolatey/bin:/mnt/c/Program Files/Git/cmd:/mnt/c/Program Files/Git/mingw64/bin:/mnt/c/Program Files/Git/usr/bin:/mnt/c/Users/mafim/Desktop/apache-maven-3.6.3/bin:/mnt/c/Program Files/dotnet/:/mnt/c/Users/mafim/AppData/Local/Microsoft/WindowsApps:/mnt/c/Users/mafim/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Users/mafim/.dotnet/tools:/snap/bin:/usr/lib/jvm/java-15-oracle/bin:/usr/lib/jvm/java-15-oracle/db/bin````
````WSLENV=````
````LESSOPEN=| /usr/bin/lesspipe %s````
````_=/usr/bin/printenv````

- printenv PWD
````/mnt/c/users/mafim/Desktop/FEUP/FSI/seed-labs-master/seed-labs-master/category-software/Environment_Variable_and_SetUID/Labsetup````

## Task 2: Passing Environment Variables from Parent Process to Child Process
    
- Step 1
    After compiling and running the program, we printed the child environment variables to the file (the program has a function printenv() to do this). After comparing these variables with the parent variables, we can conclude that the child process inherits the parent's environment variables.
    
- Step 2
    After compiling and running the program, we printed the parent environment variables and concluded that they are, as said in step 1, the same as the child environment variables.
    
- Step 3
    After using the diff command, we can conclude that there are no differences between the first file and yhe second. Therefore, the parent process passes the environment variables to the child process.

##  Task 3: Environment Variables and execve()
    
- Step 1
    After concluding the first step, our file is empty.
    
- Step 2
    After concluding the second step, the file now has the environment vairables.
    
- Step 3
    The execve() function doens't pass automatically the environment variables of the current process. We have to give the environment parameter (as we did in step 2) in order to pass these variables.

## Task 4: Environment Variables and system()
    After concluding this task, we can confirm that system() uses the execl() to execute /bin/sh, then execl() calls execve() and the environment variables array is passed. Therefore, the environment variables are stored in the new file that was created.

## Task 5: Environment Variable and Set-UID Programs
    The PATH variable and the other variable that we added were inherited by the child process, but the LD_LIBRARY_PATH variable wasn't inherited. This is a security mechanism provided by Linux to protect the system.

## Task 6: The PATH Environment Variable and Set-UID Programs
    Our malicious code was a ls file with a printf("Hello World"). Running the program with root permissions, the PATH chooses the first ls that he finds, which in this case is ours ls file, since we stored it in an elevated parent directory thant the original ls. Therefore, the PATH chooses the first ls found.

## CTF 4
    - flag{CVE-2021-34646}
    - flag{243c00de62a5e1a82f3d1e101e57edd9}
    
